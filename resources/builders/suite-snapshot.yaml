buildProperties:
  BUILD_PLAN_ID: Suite Snapshot Build

  USE_MINION_JOBS: true
  IGNORE_PIPELINE_FAILURE: true
  RELEASE_BUILD_NUMBER: latest

  ARCHIVING_CONFIG: ${BUILD_CONFIG_ROOT_PATH}/artifacts/snapshot-manifest.yaml
  ARCHIVING_PATH_GROUP_REGEX: '.*/target/(?:(windows|linux|mac|classes/ia/pentaho-update)(?!.*(dependencies)).*/)?'

  MAVEN_DEFAULT_COMMAND_OPTIONS: -B -e
  # we are running in containers, let the maven process have most of the memory available
  MAVEN_OPTS: -Xmx4g -XX:MaxRAMPercentage=90.0

  MAVEN_PUBLIC_SNAPSHOT_REPO_URL : https://repo.orl.eng.hitachivantara.com/artifactory/pntprv-mvn-scheduler-snapshot-orl/
  MAVEN_PRIVATE_SNAPSHOT_REPO_URL: https://repo.orl.eng.hitachivantara.com/artifactory/pntprv-mvn-scheduler-snapshot-orl/
  MAVEN_RESOLVE_REPO_URL         : https://repo.orl.eng.hitachivantara.com/artifactory/pntprv-scheduler/

  DOCKER_PUBLIC_PUSH_REPO        : pntpub-docker-scheduler-dev-orl.repo.orl.eng.hitachivantara.com/
  DOCKER_PRIVATE_PUSH_REPO       : pntprv-docker-scheduler-dev-orl.repo.orl.eng.hitachivantara.com/

  HELM_REPOSITORY_URL            : https://repo.orl.eng.hitachivantara.com/artifactory/lumadadataintegration-helm-dev-orl

  # Jenkins can timeout if a groovy method takes longer than 5 minutes (see
  # https://issues.jenkins-ci.org/browse/JENKINS-46507). For highly
  # parallel tasks like checkout, test, tagging, and archiving, reduce
  # to a reasonable size to reduce the risk of timeout failures.
  PARALLEL_SIZE_CHECKOUT: 15
  PARALLEL_SIZE_TEST    : 20
  PARALLEL_SIZE_TAG     : 20
  PARALLEL_SIZE_ARCHIVE : 10

  MAVEN_DEFAULT_DIRECTIVES:
    build: clean deploy -DskipTests
    test: test

  JOB_ITEM_DEFAULTS :
    dockerImage     : jenkins-build/maven/open-jdk/11
    scmBranch       : master

jobGroups:
  3700:
     - jobID           :  pdi-scheduler-plugin
       scmUrl          :  https://github.com/pentaho/pdi-scheduler-plugin.git
       scmBranch       :  scheduler-plugin

  4300:
     - jobID           :  pdi-client-assembly-ee
       scmUrl          :  https://github.com/pentaho/pdi-assemblies-ee.git
       scmBranch       :  scheduler-plugin
       testable        :  false
       archivable      :  true

  4400:
     - jobID           :  pdi-client-assembly-ee-osgi
       scmUrl          :  https://github.com/pentaho/pdi-assemblies-ee.git
       directives      :  += -Dosgi
       scmBranch       :  scheduler-plugin
       testable        :  false
       archivable      :  true
